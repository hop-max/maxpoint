{{ define "main" }}
<section class="relative min-h-screen bg-gray-900 py-8 sm:py-10 overflow-hidden">
    <div class="absolute top-0 left-1/4 w-72 h-72 bg-blue-600/15 rounded-full filter blur-[100px]"></div>
    <div class="absolute bottom-1/4 right-1/4 w-72 h-72 bg-purple-600/10 rounded-full filter blur-[100px]"></div>

    <div id="scroll-progress" class="fixed top-0 left-0 h-0.5 bg-blue-500 z-50 transition-all duration-150" style="width: 0%"></div>

    <div class="container mx-auto px-2 sm:px-4 relative max-w-5xl">
        <div class="relative bg-white/[0.03] backdrop-blur-xl rounded-3xl border border-white/10 shadow-xl p-4 sm:p-8">
            
            <a href="/blog" class="inline-flex items-center gap-2 text-gray-400 hover:text-blue-400 transition-colors mb-6 text-xs font-semibold tracking-widest group">
                <span class="transform group-hover:-translate-x-1 transition-transform">‚Üê</span>
                BACK
            </a>

            <div class="flex flex-col md:flex-row md:items-center gap-6 mb-6">
                <div class="flex-1">
                    <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-4 leading-tight">
                        {{ .Title }}
                    </h1>

                    <div class="flex items-center gap-3 text-gray-400 text-sm">
                        <div class="w-8 h-8 bg-gradient-to-tr from-blue-500/20 to-purple-500/20 border border-white/10 rounded-full flex items-center justify-center text-white font-bold text-xs">
                            {{ substr (.Params.author | default "M") 0 1 }}
                        </div>
                        <div class="flex flex-wrap items-center gap-1">
                            <span class="text-gray-200 font-semibold">{{ .Params.author | default "MaxLiv Team" }}</span>
                            <span class="mx-1">‚Ä¢</span>
                            <span>{{ .Date.Format "Jan 02, 2006" }}</span>
                            <span class="mx-1">‚Ä¢</span>
                            <span>{{ .ReadingTime }} min read</span>
                        </div>
                    </div>
                </div>

                {{ if .Params.thumbnail }}
                <div class="md:w-48 lg:w-56 flex-shrink-0">
                    <div class="rounded-xl overflow-hidden border border-white/5">
                        <img src="{{ .Params.thumbnail | relURL }}" alt="{{ .Title }}" class="w-full h-32 object-cover opacity-90">
                    </div>
                </div>
                {{ end }}
            </div>

            <div class="border-b border-white/5 mb-8"></div>

            <div class="content-area text-gray-300 text-base sm:text-[17px] leading-relaxed tracking-wide">
                {{ $content := .Content }}
                
                {{ if .Params.downloadPage }}
                    {{ $button := printf "<div class='flex justify-center my-10'><a href='%s' class='inline-block px-10 py-4 bg-gray-800 hover:bg-gray-700 text-white font-bold rounded-2xl border border-white/10 transition-all duration-300 shadow-2xl hover:scale-105 transform tracking-wide'>üì≤ Go to Download Page</a></div>" (.Params.downloadPage | relURL) }}
                    
                    {{ $content = replaceRE "(<p>.*?</p>)" (printf "${1}\n%s" $button) $content 1 }}
                {{ end }}

                {{ $content | safeHTML }}
            </div>

        </div>
    </div>
</section>

<div id="copy-toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] translate-y-20 opacity-0 transition-all duration-300 ease-in-out">
    <div class="bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 border border-white/10 backdrop-blur-md">
        <span class="text-blue-400 text-sm">‚úì</span>
        <span class="font-semibold text-xs uppercase tracking-wider">Link Copied</span>
    </div>
</div>

<style>
/* Typography for content area */
.content-area p { margin-bottom: 1.25rem; }
.content-area h2 { color: white; font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 0.75rem; }
.content-area h3 { color: white; font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.content-area ul { list-style-type: none; padding-left: 1rem; margin-bottom: 1.25rem; }
.content-area li { position: relative; padding-left: 1.25rem; margin-bottom: 0.5rem; }
.content-area li::before { content: "‚Ä¢"; position: absolute; left: 0; color: #3b82f6; }
.content-area a { color: #60a5fa; text-decoration: none; border-bottom: 1px solid rgba(96, 165, 250, 0.3); transition: border 0.2s; }
.content-area a:hover { border-bottom-color: #60a5fa; }
.content-area img { max-width: 100%; height: auto; border-radius: 0.5rem; margin: 1.5rem 0; }
</style>

<script>
/* Scroll Progress Logic */
window.onscroll = function() {
    let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    let scrolled = (winScroll / height) * 100;
    document.getElementById("scroll-progress").style.width = scrolled + "%";
};
</script>
{{ end }}